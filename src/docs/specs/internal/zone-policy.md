# 존 정책 관리

## 1. 개요
- **화면명**: 존 정책 관리
- **목적**: 존별 세차 정책(주기세차 경과일, 라이트세차 여부 등)을 관리하여 자동 오더 발행 기준을 설정
- **주요 기능**: 존 정책 목록 조회/필터링, 개별 수정(Drawer), 일괄 수정

## 2. 데이터 정책

### 2.1 정책 출처 (policyType)
존에 개별 정책이 설정되지 않은 경우, 상위 지역 정책이 기본값으로 적용됩니다.
- **Fallback 순서**: 존정책 → 지역2정책 → 지역1정책

| 정책 유형 | Badge 색상 | 설명 |
| :--- | :--- | :--- |
| 지역1정책 | 연한 회색 (slate-100) | 시/도 단위 정책 적용 중 |
| 지역2정책 | 회색 (slate-200) | 시군구 단위 정책 적용 중 |
| 존정책 | 파란색 (blue-100) | 존 개별 정책 설정됨 |

- 개별 수정 또는 일괄 수정 시 기존 지역1정책/지역2정책 → **존정책으로 자동 변경**
- 수정 모드에서 값을 비우거나 "선택안함"을 선택하면 **상위 정책으로 자동 복원** (지역2정책 → 지역1정책 순 fallback)

### 2.2 주요 관리 필드
| 필드명 | 설명 | 수정 가능 |
| :--- | :--- | :--- |
| 존 ID / 존 이름 | 존 식별 정보 | 존 이름만 가능 |
| 상세 주소 | 존의 전체 주소 | 가능 |
| 존 유형 | 현장세차존, 주기세차존, 현장세차 불가존 | 가능 |
| 주차 유형 | 노상, 건물외, 건물안, 기계식 | 가능 |
| 운영 시간 | 예: 09:00~22:00, 24시간 | 가능 |
| 지역1 / 지역2 | 시/도, 구/군 | 불가 |
| 주기세차 경과일 | 주기세차 오더 발행 기준 일수 | 가능 |
| 라이트세차 | Y/N (Badge 표시) | 가능 |
| 차량 대수 | 존에 위치한 차량 수 | 불가 |
| 정책 유형 | 지역1정책/지역2정책/존정책 (Badge) | 자동 결정 |
| 존 특이사항 | 메모 | 가능 |

---

## 3. 화면 구성 및 기능

### 3.1 리스트
- **검색**: 검색 항목(존 ID / 존 이름) 선택 후 텍스트 검색. 콤마(,) 또는 공백으로 여러 값 동시 검색 가능.
- **필터**: 지역1, 지역2, 존 유형
  - 지역1 선택 전까지 지역2 비활성화. 지역1 변경 시 지역2 초기화.
- **페이지네이션**: 40건
- **기본 정렬**: 존 ID 오름차순
- **정렬**: 정렬 가능 컬럼에 한해 헤더 클릭 시 오름차순/내림차순 토글. 정렬 가능 컬럼은 헤더에 화살표 아이콘(↕)으로 표시.

#### 컬럼
| 헤더명 | 정렬 | 비고 |
| :--- | :---: | :--- |
| 존 ID | | |
| 존 이름 | | |
| 존 유형 | | |
| 차량 대수 | O | |
| 주기세차(일) | O | |
| 라이트세차 | | Badge |
| 정책 유형 | | Badge (존정책/지역2정책/지역1정책) |

### 3.2 상세 (Drawer)
행 클릭 시 상세 정보 조회. [수정] 버튼 클릭 시 편집 모드 전환.
- **수정 가능 항목**: 존 유형, 주기세차 경과일, 라이트세차, 존 특이사항
- **저장 후 동작**: Drawer가 닫히지 않고 수정된 내용을 즉시 확인 가능 (저장 완료 alert 없음)
- **라이트세차 표기**: Y / N (상세 화면, 리스트 동일)

#### 상위 정책 따름 동작
- **라이트세차**: "선택안함 (상위 정책 따름)" 옵션 선택 시 상위 정책으로 복원
- **주기세차 경과일**: 입력값을 비우면(빈 값) 자동으로 상위 정책으로 복원. placeholder에 상위 정책 값 표시
- **복원 우선순위**: 지역2정책이 존재하면 지역2정책, 없으면 지역1정책 적용

### 3.3 일괄 수정
- 검색/필터가 하나라도 적용된 상태에서 [필터된 데이터 일괄 수정] 버튼 활성화
- 팝업에서 주기세차 경과일 / 라이트세차 변경 후 저장 → 필터링된 모든 존에 일괄 적용
