# 발행 유형 정책 관리

## 1. 개요
- **화면명**: 발행 유형 정책 관리
- **목적**: 세차 오더 발행 유형별 정책(중요도 점수, 블락 시간, 파트너 유형 등)을 등록·수정하고 중요도 순위를 관리
- **주요 기능**: 정책 목록 조회/정렬, 정책 등록/수정(Drawer), 중요도 순위 자동 계산, 변경 이력 관리

## 2. 데이터 정책

### 2.1 중요도 총점 산출
사용자 항목 선택/입력 시 실시간 계산하여 표시합니다.

**공식**: `(세차유형점수 × 10000) + (오더구분점수 × 1000) + (발행유형점수 × 100) + (가산점 × 10) + 존유형점수`

| 항목 | 점수 매핑 |
| :--- | :--- |
| 세차 유형 | 협의(8), 특수(7), 내외부(5), 내부(4), 외부(3), 물세차(2), 라이트(1) |
| 오더 구분 | 변경(9), 수시(8), 긴급(7), 정규(5), 특별(3) |
| 존 유형 | 일반존(8), 주기세차존(6), 현장세차 불가존(4), 시승존/캠핑카(0) |

- **순위**: 전체 정책의 총점 내림차순으로 자동 산출. 데이터 추가/수정 시 전체 순위 재계산.

### 2.2 파트너 유형 자동 결정
운영자 수기 선택 불가. 아래 조건에 따라 시스템이 자동 판단합니다.
- **입고**: 존유형이 `현장세차 불가존`이거나, 세차 유형이 `특수` 또는 `협의`
- **현장**: 위 조건에 해당하지 않는 모든 경우

### 2.3 블락 시간 자동 합산
- **입력 항목**: 쿠션(전), 핸들러(배차), 세차수행시간, 쿠션(후), 핸들러(반차)
- **총 블락 시간**: 5개 항목의 합계 (분 단위, 읽기 전용)

### 2.4 버전 관리
- 저장 시 `version` +1 자동 증가
- 수정 일시, 수정자 ID, 변경 내역(필드별 From/To)을 `history`에 기록

---

## 3. 화면 구성 및 기능

### 3.1 리스트
- **노출 방식**: 페이지네이션 없이 전체 노출, 세로 스크롤. 고정 헤더(Sticky).
- **기본 정렬**: 발행 유형 ID 오름차순
- **엑셀 다운로드**: 현재 리스트 데이터 파일 추출

#### 컬럼
정책 ID, 순위, 오더 구분, 발행 유형, 세차 유형, 존유형, 블락시간, 발행여부(Badge), 파트너 유형

### 3.2 상세/등록 (Drawer)
행 클릭 시 상세 조회, [수정] 클릭 시 편집 모드 전환. 신규 등록과 수정을 하나의 Drawer에서 처리.
모든 필드 라벨 옆 도움말 아이콘(?) — 마우스 오버 시 점수 매핑표/공식 포함 툴팁 표시.

#### 탭 구성
1. **상세 정보**: 정책 필드 입력 및 자동 계산 결과 확인
2. **API 상세**: 백엔드/AI 모델 통신용 JSON 스키마 예시
3. **변경 이력**: 수정 시점, 수정자, 변경 내역(From/To) 역순 표시

#### 입력 필드
| 항목 | 타입 | 제약 사항 |
| :--- | :--- | :--- |
| 발행 유형 명칭 | Input | 필수, 시스템 내 중복 불가 |
| 발행 유형 점수 | Input | 1~9, 동일 오더 구분 내 중복 금지 |
| 설명 | Textarea | 최대 100자 |
| 오더 발행 여부 | Select | Y/X (Badge 표시) |
| wait_time 취소 여부 | Select | Y/X (Badge 표시) |
| wait_time | Input | 시간 단위 숫자 |
| 미션등록 여부 | Select | Y/N |
| 가산점 | Input | 숫자 (초기값 0) |

- **Select 드롭다운**: 셰어링 유형(단기/시승), 오더 구분(정규/변경/수시/특별), 세차 유형(협의/특수/내외부/내부/외부/물세차/라이트), 존유형(일반존/주기세차존/현장세차 불가존/시승존/캠핑카), 블락 유형(세차블락/장애블락)
- **블락 시간 입력**: 분 단위 숫자 (쿠션전/핸들러배차/세차수행시간/쿠션후/핸들러반차)

#### 유효성 검사
- 발행 유형 명칭 중복 여부 전체 리스트 확인
- 동일 오더 구분 내 발행 유형 점수 중복 확인
