# 분실물 관리

## 1. 개요
- **화면명**: 분실물 관리
- **목적**: 세차 과정에서 발견된 고객 분실물을 등록, 추적, 처리하며 옥스트라(Oxtra) 분실물 카드와 연동하여 안전하게 인계
- **주요 기능**: 분실물 목록 조회, 상세 확인 및 인라인 편집, 배송/경찰서 인계 처리, 폐기 처리

## 2. 데이터 정책

### 2.1 데이터 모델

| 필드명 | 수정 가능 | 설명 |
| :--- | :--- | :--- |
| 분실물 ID | 불가 | 시스템 자동 생성 고유 식별자 |
| 접수 일시 | 불가 | 최초 등록 시간 |
| 분실물 구분 | **가능** | `일반` 또는 `귀중품` |
| 처리 상태 | 불가 | 자동 전이 + 액션 버튼으로만 변경 |
| 습득물 상세 정보 | **가능** | 분실물 구체적 정보 |
| 습득물 사진 | **가능** | 사진 URL 목록 |
| 차량 번호 | 불가 | |
| 존 이름 / 존 ID | 불가 | |
| 지역1 / 지역2 | 불가 | |
| 파트너 이름 | 불가 | |
| 연계 오더 ID | 불가 | 세차 오더 ID (자동 설정) |
| 분실물 카드 접수 번호 | 불가 | 옥스트라 연동 접수 번호 (자동 설정) |
| 배송 주소1 / 주소2 | **가능** | 도로명 + 상세 주소 |
| 수령인 이름 | **가능** | 분실물 수령인 이름 |
| 수령인 휴대폰 번호 | **가능** | 분실물 수령인 연락처 |

### 2.2 처리 상태 정의

| 상태명 | 해당 구분 | 설명 |
| :--- | :--- | :--- |
| 배송지 미입력 | 공통 | 배송지 미입력 상태 |
| 발송 대기 | 일반 | 배송지 입력 완료, 발송 대기 |
| 발송 완료 | 일반 | 배송 완료 (종결) |
| 경찰서 인계 | 귀중품 | 경찰서 인계 완료 (종결) |
| 폐기 완료 | 공통 | 보관 기간 만료 폐기 (종결) |

### 2.3 상태 전이

**자동 전이 (주소 저장 시):**
- 일반: `배송지 미입력` → `발송 대기` (배송 주소 저장 시)
- 귀중품: `배송지 미입력` → `경찰서 인계` (경찰서 주소 저장 시)

**액션 버튼:**
- [발송 완료]: `일반` + `발송 대기` 상태에서만 활성화
- [폐기 완료]: 비종결 상태에서 활성화 (구분 무관)

**종결 상태** (`발송 완료`, `경찰서 인계`, `폐기 완료`):
- 분실물 구분 Select 비활성화, 배송 주소/수령인 정보 읽기 전용
- Drawer Footer 액션 버튼 숨김

**구분 변경 시**: 현재 상태가 새 구분의 유효 상태에 없으면 `배송지 미입력`으로 리셋 (컨펌 포함)

### 2.4 분실물 정보 생성 흐름

분실물은 두 가지 경로로 생성되며, 연계 오더 ID와 카드 접수 번호가 자동 설정됩니다.

**1) 옥스트라 분실물 카드 존재**: 옥스트라에 카드 등록 → 해당 차량 세차 오더에서 '분실물 카드' 정보 확인 가능 → 수행원 수거 완료 시 분실물 정보 생성

**2) 수행원 현장 발견**: 수행원이 세차 중 미신고 분실물 발견 → 에이전트에서 등록 시 분실물 정보 생성 + 옥스트라 카드 자동 생성 (동기화)

---

## 3. 화면 구성 및 기능

### 3.1 리스트

#### 검색 및 필터
| 구분 | 필드 | 설명 |
| :--- | :--- | :--- |
| 검색 | 검색 항목 (Select) | `차량 번호` / `분실물 카드` 선택 |
| 검색 | 검색어 (Input) | 선택 항목 기준 텍스트 검색 |
| 필터 | 파트너 이름 | 기본값: 전체 |
| 필터 | 처리 상태 | 기본값: 전체 (5개 상태 옵션) |
| 기간 | 접수일 시작~종료 | 기본값: 최근 2개월 |

#### 컬럼
분실물 ID, 파트너 이름, 차량 번호, 존 이름, 오더 ID, 접수 일시, 분실물 카드 번호, 처리 상태(Badge)

- **기본 정렬**: 분실물 ID 내림차순
- **페이지네이션**: 40건

### 3.2 상세 (Drawer)

- **타이틀**: "분실물 상세 정보" / 부제: "분실물 상세 및 처리 상태 관리"
- **인라인 편집**: 수정 가능 필드는 처음부터 입력 컴포넌트로 표시 (별도 수정 모드 없음)

#### Footer
- 좌측: [발송 완료] (primary, 일반+발송대기 시), [폐기 완료] (danger, 비종결 시)
- 우측: [닫기]
- 각 버튼 클릭 시 `confirm()` 확인 후 상태 변경

#### 카드 1: 분실물 정보
| 필드 | 타입 | 비고 |
| :--- | :--- | :--- |
| 분실물 ID | 텍스트 (읽기 전용) | |
| 접수 일시 | 텍스트 (읽기 전용) | |
| 분실물 구분 | Select | 값 변경 시 confirm → 즉시 반영. 종결 시 비활성화 |
| 처리 상태 | Badge (읽기 전용) | 자동 전이/액션 버튼으로만 변경 |
| 배송 주소 / 경찰서 주소 | Input×2 + [저장] | 귀중품일 때 레이블 "경찰서 주소". 라디오: 우편번호 검색(기본)/직접 입력. 힌트 메시지 표시 |
| 수령인 이름 | Input + [저장] | 구분 무관, 종결 시 읽기 전용 |
| 수령인 휴대폰 번호 | Input + [저장] | 구분 무관, 종결 시 읽기 전용 |
| 습득물 상세 정보 | Textarea + [저장] | |
| 습득물 사진 | 사진 추가/삭제 | 즉시 반영 (별도 저장 불필요) |

- Input/Textarea [저장] 버튼: 변경사항 없으면 disabled, 있으면 primary 활성화

#### 카드 2: 차량 정보
차량 번호, 존 이름, 지역1, 지역2, 존 ID (모두 읽기 전용)

#### 카드 3: 세차 오더 정보
파트너 이름, 연계 오더 ID (모두 읽기 전용)

#### 카드 4: 분실물 카드 정보 (옥스트라 연동)
카드 접수 번호 (읽기 전용, 없으면 `-`)
