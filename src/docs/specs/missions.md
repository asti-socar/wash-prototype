# 미션 관리 (정책 기반 개편)

## 1. 개요
- **화면명**: 미션 관리
- **목적**: 반복되거나 대량으로 발생하는 특수 과업을 '정책'으로 정의하고, 해당 정책을 수행해야 할 차량들을 일괄 할당 및 관리하여 운영 효율성을 높입니다.
- **주요 변경 사항**: 단일 미션 등록 방식에서 `정책(부모) - 대상 차량(자식)` 구조로 변경.

## 2. 기능 명세

### 2.1 미션 정책 리스트 (Main)
등록된 미션 정책(항목 및 금액)을 한눈에 확인합니다.

| 필드명 | 설명 |
| :--- | :--- |
| **정책 ID** | 정책 고유 식별자 |
| **미션 내용** | 수행해야 할 과업 명칭 (예: 스티커 제거) |
| **미션 금액** | 수행 시 지급될 추가 금액 |
| **대상 차량수** | 해당 정책에 등록된 총 차량 대수 |
| **수행 완료수** | 오더를 통해 수행이 완료된 차량 대수 |
| **진행률** | (수행 완료수 / 대상 차량수) % |
| **등록일** | 정책 생성 일자 |

### 2.2 미션 정책 상세 및 차량 관리 (Drawer)
특정 정책을 클릭했을 때 열리며, 정책 정보 수정 및 대상 차량을 관리합니다.

#### A. 정책 정보 수정 섹션
- **내용/금액/사진 필수 여부**: 기존 정책 정보를 수정할 수 있는 필드 제공.

#### B. 대상 차량 등록 및 상태 섹션
- **차량 일괄 등록**: 차량번호를 줄바꿈이나 콤마로 구분하여 대량 입력(최대 1,000건).
- **차량별 수행 현황 리스트**:
    - **차량번호**: 대상 차량.
    - **수행 상태**: 대기 / 수행완료.
    - **연결된 오더**: 수행 완료 시 해당 오더 ID 노출 및 링크 연결.
    - **완료 일시**: 세차 완료 시각 기록.
    - **관리**: 대기 상태인 차량의 경우 목록에서 삭제(제외) 가능.

## 3. 비즈니스 로직
1. **오더 연동**: 특정 차량에 대해 세차 오더가 발행될 때, 해당 차량번호가 등록된 모든 '대기' 상태의 미션 정책들이 해당 오더의 미션으로 자동 포함됨.
2. **상태 업데이트**: 연동된 오더가 '완료'되면, 해당 정책 하위의 차량 상태가 '수행완료'로 자동 변경됨.
3. **삭제 정책**: 정책 자체를 삭제할 경우 하위 차량 할당 정보도 모두 삭제됨 (감사 로그 기록 필요).