# 존 배정 관리

## 1. 개요
- **화면명**: 존 배정 관리
- **목적**: 전체 존 기준으로 파트너 배정 현황을 관리. 미배정 존을 식별하고 파트너를 배정
- **주요 기능**: 존 목록 조회, 배정 상태 필터링, 파트너 배정/변경/해제, 대량 존 배정(CSV/Excel)

## 2. 데이터 정책

### 2.1 데이터 관계
- **존 → 파트너**: 1:1 (하나의 존에 하나의 파트너만 배정 가능)
- **파트너 → 존**: 1:N (하나의 파트너가 여러 존 담당 가능)

### 2.2 배정 상태 변경
- **배정**: 미배정 존에 파트너를 선택
- **변경**: 이미 배정된 존의 파트너를 변경
- **해제**: 배정된 파트너를 "미배정"으로 변경

---

## 3. 화면 구성 및 기능

### 3.1 리스트
- **상단 통계**: 전체 존 개수, 배정(녹색), 미배정(주황색)
- **페이지네이션**: 40건
- **기본 정렬**: 존 ID 내림차순. 헤더 클릭 시 정렬 토글.
- **검색**: 존 ID 또는 존 이름
- **필터**: 지역1, 지역2(지역1 선택 전 비활성화), 배정 상태(전체/배정/미배정)

#### 컬럼
| 헤더명 | 정렬 | 비고 |
| :--- | :---: | :--- |
| 존 ID | O | |
| 지역1 / 지역2 | O | |
| 존 이름 | O | |
| 존 유형 | O | 현장세차존, 주기세차존, 현장세차 불가존 |
| 차량 대수 | O | |
| 배정 파트너 | O | 파트너명 또는 `<Badge tone="warn">미배정</Badge>` |

### 3.2 존 배정 상세 (Drawer)
- **타이틀**: `존 배정 상세 - {존ID}`

#### A. 존 정보
존 ID, 존 이름, 지역(지역1/지역2), 전체 주소, 존 유형 (모두 읽기 전용)

#### B. 차량 정보
차량 대수 (읽기 전용)

#### C. 파트너 배정
- Select 드롭다운으로 파트너 선택/변경. 옵션: "미배정" + 전체 파트너 목록.
- 변경 시 `confirm()`: "배정 파트너를 '{파트너명}'(으)로 변경하시겠습니까?"
- 배정된 수행원이 있는 경우 추가 메시지: "배정된 수행원 정보가 초기화됩니다."
- 확인 시 즉시 반영 (별도 저장 버튼 없음)

#### D. 배정된 수행원 정보
- 파트너가 배정된 존에서만 표시 (소속 파트너 + 배정 존 일치 수행원)
- **컬럼**: 수행원 ID, 이름, 벌점 (0이면 회색, 1 이상이면 빨간 배지)
- 파트너 미배정: "파트너가 배정되지 않은 존입니다." 안내
- 수행원 없음: "배정된 수행원이 없습니다." 안내

### 3.3 대량 존 배정 (Drawer)
[대량 존 배정] 버튼 클릭 시 드로어 열림.

- **양식 다운로드**: CSV 템플릿 (`zoneId,partnerId`)
- **파일 업로드**: 클릭 또는 드래그앤드롭. CSV(.csv), Excel(.xlsx, .xls) 지원.
- **검증 결과**: 배정 가능 건수 + 실패 건(사유 포함) 표시
- **배정 적용**: [N건 배정 적용] 버튼 → confirm 후 일괄 반영

#### 검증 로직
| 검증 항목 | 실패 메시지 |
| :--- | :--- |
| 존 ID 누락 | 존 ID가 비어있습니다. |
| 존재하지 않는 존 ID | 존재하지 않는 존 ID입니다. |
| 존재하지 않는 파트너 ID | 존재하지 않는 파트너 ID입니다. |
